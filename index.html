<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Compressor</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    /* General Styles */
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: #333;
    }

    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      display: flex;
      justify-content: center;
      padding: 10px 0;
    }

    .navbar a {
      color: #444;
      text-decoration: none;
      font-size: 1rem;
      margin: 0 15px;
      padding: 8px 16px;
      border-radius: 5px;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .navbar a:hover {
      background: #667eea;
      color: #fff;
    }

    .container {
      background: #fff;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      width: 90%;
      max-width: 600px;
      text-align: center;
      margin-top: 60px; /* To account for the fixed navbar */
    }

    h1 {
      color: #444;
      font-size: 2rem;
      margin-bottom: 20px;
      font-weight: 600;
    }

    .upload-section {
      margin-bottom: 2rem;
    }

    .upload-section input[type="file"] {
      display: none;
    }

    .upload-section label {
      background: #667eea;
      color: #fff;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s ease;
      display: inline-block;
    }

    .upload-section label:hover {
      background: #5a6fd1;
    }

    .compress-level {
      margin: 1rem 0;
    }

    .compress-level label {
      font-size: 1rem;
      color: #555;
      display: block;
      margin-bottom: 10px;
    }

    .compress-level input[type="range"] {
      width: 100%;
      margin-top: 10px;
      -webkit-appearance: none;
      appearance: none;
      height: 8px;
      background: #e0e0e0;
      border-radius: 5px;
      outline: none;
      opacity: 0.7;
      transition: opacity 0.2s;
    }

    .compress-level input[type="range"]:hover {
      opacity: 1;
    }

    .compress-level input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      background: #667eea;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .results-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 2rem;
    }

    .results-table th,
    .results-table td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
    }

    .results-table th {
      background: #667eea;
      color: #fff;
      font-weight: 500;
    }

    .results-table td {
      background: #f9f9f9;
    }

    .emoji {
      font-size: 1.2rem;
    }

    .download-btn {
      background: #28a745;
      color: #fff;
      padding: 8px 16px;
      border-radius: 5px;
      text-decoration: none;
      font-size: 0.9rem;
      transition: background 0.3s ease;
    }

    .download-btn:hover {
      background: #218838;
    }

    /* Modern Card Effect */
    .container {
      position: relative;
      overflow: hidden;
    }

    .container::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      transform: rotate(45deg);
      z-index: -1;
    }

    /* Responsive Design */
    @media (max-width: 600px) {
      h1 {
        font-size: 1.5rem;
      }

      .upload-section label {
        padding: 10px 20px;
        font-size: 0.9rem;
      }

      .compress-level label {
        font-size: 0.9rem;
      }

      .results-table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }

      .results-table thead,
      .results-table tbody,
      .results-table tr,
      .results-table th,
      .results-table td {
        display: block;
        width: 100%;
      }

      .results-table th,
      .results-table td {
        padding: 8px;
        font-size: 0.9rem;
        text-align: left;
      }

      .results-table th {
        background: #667eea;
        color: #fff;
        font-weight: 500;
      }

      .results-table td {
        background: #f9f9f9;
      }

      .results-table tr {
        margin-bottom: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }

      .results-table td:before {
        content: attr(data-label);
        font-weight: bold;
        display: inline-block;
        width: 50%;
        color: #444;
      }

      .results-table td {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .download-btn {
        width: 100%;
        text-align: center;
        margin-top: 10px;
      }

      .navbar a {
        font-size: 0.9rem;
        margin: 0 10px;
        padding: 6px 12px;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <div class="navbar">
    <a href="/">üè† Home</a>
    <a href="/blog.html">üìù Blog</a>
  </div>

  <!-- Main Container -->
  <div class="container">
    <h1>üì∑ Image Compressor</h1>
    <div class="upload-section">
      <label for="file-input">üì§ Upload Image</label>
      <input type="file" id="file-input" accept="image/*">
    </div>
    <div class="compress-level">
      <label for="compress-range">üîß Compression Level: <span id="compress-value">50</span>%</label>
      <input type="range" id="compress-range" min="1" max="100" value="50">
    </div>
    <table class="results-table">
      <thead>
        <tr>
          <th>üìÑ File Name</th>
          <th>üìè Original Size</th>
          <th>üìâ Compressed Size</th>
          <th>üöÄ Action</th>
        </tr>
      </thead>
      <tbody id="results-body">
        <!-- Results will be populated here -->
      </tbody>
    </table>
  </div>

  <!-- Vercel Analytics Script -->
  <script type="module">
    import { inject } from 'https://unpkg.com/@vercel/analytics';
    inject();
  </script>

  <script>
    const fileInput = document.getElementById('file-input');
    const compressRange = document.getElementById('compress-range');
    const compressValue = document.getElementById('compress-value');
    const resultsBody = document.getElementById('results-body');

    // Update compression level value
    compressRange.addEventListener('input', () => {
      compressValue.textContent = compressRange.value;
    });

    // Handle file upload and compression
    fileInput.addEventListener('change', (event) => {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = (e) => {
        const img = new Image();
        img.src = e.target.result;

        img.onload = () => {
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');

          // Set canvas dimensions
          canvas.width = img.width;
          canvas.height = img.height;

          // Draw image on canvas
          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

          // Compress image
          const quality = compressRange.value / 100;
          canvas.toBlob(
            (blob) => {
              const compressedFile = new File([blob], file.name, {
                type: 'image/jpeg',
                lastModified: Date.now(),
              });

              // Display results
              displayResults(file, compressedFile);
            },
            'image/jpeg',
            quality
          );
        };
      };
      reader.readAsDataURL(file);
    });

    // Display results in the table
    function displayResults(originalFile, compressedFile) {
      const row = document.createElement('tr');

      // File Name
      const fileNameCell = document.createElement('td');
      fileNameCell.textContent = originalFile.name;
      fileNameCell.setAttribute('data-label', 'File Name');
      row.appendChild(fileNameCell);

      // Original Size
      const originalSizeCell = document.createElement('td');
      originalSizeCell.textContent = `${(originalFile.size / 1024).toFixed(2)} KB`;
      originalSizeCell.setAttribute('data-label', 'Original Size');
      row.appendChild(originalSizeCell);

      // Compressed Size
      const compressedSizeCell = document.createElement('td');
      compressedSizeCell.textContent = `${(compressedFile.size / 1024).toFixed(2)} KB`;
      compressedSizeCell.setAttribute('data-label', 'Compressed Size');
      row.appendChild(compressedSizeCell);

      // Download Button
      const actionCell = document.createElement('td');
      const downloadLink = document.createElement('a');
      downloadLink.href = URL.createObjectURL(compressedFile);
      downloadLink.download = `compressed_${originalFile.name}`;
      downloadLink.className = 'download-btn';
      downloadLink.textContent = '‚¨áÔ∏è Download';
      actionCell.setAttribute('data-label', 'Action');
      actionCell.appendChild(downloadLink);
      row.appendChild(actionCell);

      // Add row to table
      resultsBody.appendChild(row);
    }
  </script>
</body>
</html>
